<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Vistoria - Shopping Security</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .equipment-card {
            transition: all 0.3s;
            cursor: pointer;
        }
        .equipment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .status-ok { border-left: 5px solid #28a745; }
        .status-warning { border-left: 5px solid #ffc107; }
        .status-danger { border-left: 5px solid #dc3545; }
        #aiAssistant {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
            <div class="container">
                <a class="navbar-brand" href="#">Shopping Security</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" id="navHome">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="navInspections">Vistorias</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" id="navReports">Relatórios</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div id="homeView" class="view">
            <div class="row mb-4">
                <div class="col-md-6">
                    <h2>Vistoria de Segurança</h2>
                    <p class="lead">Sistema completo para gestão de extintores e hidrantes do shopping</p>
                </div>
                <div class="col-md-6 text-end">
                    <button class="btn btn-primary" id="startInspection">Nova Vistoria</button>
                    <button class="btn btn-outline-secondary" id="generateReport">Gerar Relatório</button>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card equipment-card status-ok">
                        <div class="card-body">
                            <h5 class="card-title">Extintores</h5>
                            <p class="card-text"><span id="extinguisherCount">0</span> equipamentos cadastrados</p>
                            <div class="progress mb-2">
                                <div class="progress-bar bg-success" id="extinguisherOkPercent" style="width: 0%"></div>
                                <div class="progress-bar bg-warning" id="extinguisherWarningPercent" style="width: 0%"></div>
                                <div class="progress-bar bg-danger" id="extinguisherDangerPercent" style="width: 0%"></div>
                            </div>
                            <small class="text-muted">Status atual dos equipamentos</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card equipment-card status-warning">
                        <div class="card-body">
                            <h5 class="card-title">Hidrantes</h5>
                            <p class="card-text"><span id="hydrantCount">0</span> equipamentos cadastrados</p>
                            <div class="progress mb-2">
                                <div class="progress-bar bg-success" id="hydrantOkPercent" style="width: 0%"></div>
                                <div class="progress-bar bg-warning" id="hydrantWarningPercent" style="width: 0%"></div>
                                <div class="progress-bar bg-danger" id="hydrantDangerPercent" style="width: 0%"></div>
                            </div>
                            <small class="text-muted">Status atual dos equipamentos</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Próximas Vistorias</h5>
                            <ul class="list-group" id="nextInspectionsList">
                                <li class="list-group-item">Carregando...</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="inspectionView" class="view" style="display: none;">
            <div class="row mb-4">
                <div class="col-md-6">
                    <h2>Nova Vistoria</h2>
                </div>
                <div class="col-md-6 text-end">
                    <button class="btn btn-outline-secondary" id="cancelInspection">Cancelar</button>
                    <button class="btn btn-primary" id="saveInspection">Salvar Vistoria</button>
                </div>
            </div>

            <div class="row">
                <div class="col-md-8">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>Detalhes do Equipamento</h5>
                        </div>
                        <div class="card-body">
                            <form id="inspectionForm">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="equipmentType" class="form-label">Tipo de Equipamento</label>
                                        <select class="form-select" id="equipmentType" required>
                                            <option value="">Selecione...</option>
                                            <option value="extinguisher">Extintor</option>
                                            <option value="hydrant">Hidrante</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="equipmentId" class="form-label">Identificação</label>
                                        <input type="text" class="form-control" id="equipmentId" required>
                                    </div>
                                </div>

                                <div class="row mb-3" id="extinguisherFields">
                                    <div class="col-md-4">
                                        <label for="extinguisherType" class="form-label">Tipo de Extintor</label>
                                        <select class="form-select" id="extinguisherType">
                                            <option value="water">Água</option>
                                            <option value="co2">CO²</option>
                                            <option value="powder">Pó Químico</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="extinguisherCapacity" class="form-label">Capacidade (kg)</label>
                                        <input type="number" class="form-control" id="extinguisherCapacity">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="extinguisherDueDate" class="form-label">Validade</label>
                                        <input type="date" class="form-control" id="extinguisherDueDate">
                                    </div>
                                </div>

                                <div class="row mb-3" id="hydrantFields">
                                    <div class="col-md-6">
                                        <label for="hydrantType" class="form-label">Tipo de Hidrante</label>
                                        <select class="form-select" id="hydrantType">
                                            <option value="column">Coluna</option>
                                            <option value="wall">Parede</option>
                                            <option value="underground">Subterrâneo</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="hydrantPressure" class="form-label">Pressão (psi)</label>
                                        <input type="number" class="form-control" id="hydrantPressure">
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="location" class="form-label">Localização</label>
                                        <input type="text" class="form-control" id="location" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="floor" class="form-label">Piso</label>
                                        <input type="text" class="form-control" id="floor" required>
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-md-12">
                                        <label for="inspectionNotes" class="form-label">Observações</label>
                                        <textarea class="form-control" id="inspectionNotes" rows="3"></textarea>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>Checklist de Vistoria</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="checkAccessible">
                                    <label class="form-check-label" for="checkAccessible">Acesso desobstruído</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="checkSeal">
                                    <label class="form-check-label" for="checkSeal">Lacre intacto</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="checkPressure">
                                    <label class="form-check-label" for="checkPressure">Pressão adequada (extintores)</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="checkHose">
                                    <label class="form-check-label" for="checkHose">Mangueira em bom estado</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="checkSignalization">
                                    <label class="form-check-label" for="checkSignalization">Sinalização visível</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="checkValves">
                                    <label class="form-check-label" for="checkValves">Válvulas operáveis (hidrantes)</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="status" class="form-label">Status Geral</label>
                                <select class="form-select" id="status">
                                    <option value="ok">Aprovado</option>
                                    <option value="warning">Atenção</option>
                                    <option value="danger">Reprovado</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="reportsView" class="view" style="display: none;">
            <div class="row mb-4">
                <div class="col-md-6">
                    <h2>Relatórios</h2>
                </div>
                <div class="col-md-6 text-end">
                    <button class="btn btn-primary" id="exportExcel">Exportar para Excel</button>
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h5>Filtros</h5>
                        </div>
                        <div class="card-body">
                            <form id="reportFilterForm">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label for="filterEquipmentType" class="form-label">Tipo de Equipamento</label>
                                        <select class="form-select" id="filterEquipmentType">
                                            <option value="all">Todos</option>
                                            <option value="extinguisher">Extintor</option>
                                            <option value="hydrant">Hidrante</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="filterStatus" class="form-label">Status</label>
                                        <select class="form-select" id="filterStatus">
                                            <option value="all">Todos</option>
                                            <option value="ok">Aprovado</option>
                                            <option value="warning">Atenção</option>
                                            <option value="danger">Reprovado</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="filterStartDate" class="form-label">Data Inicial</label>
                                        <input type="date" class="form-control" id="filterStartDate">
                                    </div>
                                    <div class="col-md-3">
                                        <label for="filterEndDate" class="form-label">Data Final</label>
                                        <input type="date" class="form-control" id="filterEndDate">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-12 text-end">
                                        <button type="button" class="btn btn-secondary" id="resetFilters">Limpar Filtros</button>
                                        <button type="button" class="btn btn-primary" id="applyFilters">Aplicar Filtros</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h5>Resultados</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped" id="reportTable">
                                    <thead>
                                        <tr>
                                            <th>Data</th>
                                            <th>Tipo</th>
                                            <th>Identificação</th>
                                            <th>Localização</th>
                                            <th>Status</th>
                                            <th>Inspetor</th>
                                            <th>Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Dados serão preenchidos via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Assistente de IA -->
    <div id="aiAssistant" class="card" style="width: 350px;">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <h6 class="mb-0">Assistente de IA</h6>
            <button class="btn btn-sm btn-light" id="minimizeAi">_</button>
        </div>
        <div class="card-body" id="aiChatBody" style="height: 300px; overflow-y: auto;">
            <div class="mb-2">
                <small class="text-muted">IA:</small>
                <div class="alert alert-info p-2">Olá! Sou seu assistente para vistorias de segurança. Como posso ajudar?</div>
            </div>
        </div>
        <div class="card-footer">
            <div class="input-group">
                <input type="text" class="form-control" id="aiMessageInput" placeholder="Digite sua mensagem...">
                <button class="btn btn-primary" id="sendAiMessage">Enviar</button>
            </div>
        </div>
    </div>

    <!-- Modal para visualização detalhada -->
    <div class="modal fade" id="inspectionDetailModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Detalhes da Vistoria</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="inspectionDetailContent">
                    <!-- Conteúdo será preenchido via JavaScript -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                    <button type="button" class="btn btn-primary" id="printInspection">Imprimir</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
<div class="row mb-3">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5>Fotos do Equipamento</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="equipmentPhotos" class="form-label">Adicionar fotos</label>
                    <input class="form-control" type="file" id="equipmentPhotos" accept="image/*" multiple>
                </div>
                <div class="row" id="photoPreviewContainer">
                    <!-- Pré-visualização das fotos será exibida aqui -->
                </div>
            </div>
        </div>
    </div>
</div>
